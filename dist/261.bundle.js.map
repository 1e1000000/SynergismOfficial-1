{"version":3,"sources":["webpack://synergismofficial/./src/Plugins/Dashboard.ts"],"names":["SplitTime","numberOfHours","Days","Math","floor","Remainder","Hours","Minutes","statValues","el","textContent","document","getElementById","join","map","x","talismanColors","querySelectorAll","forEach","span","i","style","color","roomba","autorune","autoch","autosac","realtime","seconds","firstChild","button","lastElementChild","tab","createElement","id","display","innerHTML","settingsTab","className","dashboardLoopRefFast","dashboardLoopRefSlow","activeTab","open","renderDashboardSlow","upgrade","Number","value","levels","querySelector","tess","hyper","plat","Upgrades","tessCost","tesseracts","hyperCost","hypercubes","platCost","platonics","time","platRate","hyperRate","tessRate","platTimeNeeded","hyperTimeNeeded","tessTimeNeeded","Plats","max","Hypers","Tess","totalTimeNeeded","minutesToAdd","futureDate","Date","now","toPrecision","getCubeTimes","renderDashboardFast","exitDashboard","stat","_a","call","clearInterval","getElementsByClassName","btnListener","n","setInterval","innerText","openDashboard","subButtons","main","head","removeChild","removeEventListener","v","console","log","css","appendChild","createTextNode","GM_addStyle","addEventListener","enable"],"mappings":"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","file":"261.bundle.js","sourcesContent":["import { CalcCorruptionStuff } from '../Calculate';\nimport { platUpgradeBaseCosts } from '../Platonic';\nimport { player, format } from '../Synergism';\nimport { toggleAntAutoSacrifice, toggleAutoChallengeRun, toggleAutoResearch, toggleAutoSacrifice } from '../Toggles';\nimport { visualUpdateCubes } from '../UpdateVisuals';\nimport { getElementById, stripIndents } from '../Utility';\nimport { Globals as G } from '../Variables';\nconst SplitTime = (numberOfHours) => {\n    const Days = Math.floor(numberOfHours / 24);\n    const Remainder = numberOfHours % 24;\n    const Hours = Math.floor(Remainder);\n    const Minutes = Math.floor(60 * (Remainder - Hours));\n    return ({ Days, Hours, Minutes });\n};\nconst getCubeTimes = (i = 5, levels = 1) => {\n    const [, , , , , tess, hyper, plat] = CalcCorruptionStuff();\n    const Upgrades = platUpgradeBaseCosts[i];\n    const tessCost = Upgrades.tesseracts * levels;\n    const hyperCost = Upgrades.hypercubes * levels;\n    const platCost = Upgrades.platonics * levels;\n    const time = player.ascensionCounter / 3600;\n    const platRate = plat / time;\n    const hyperRate = hyper / time;\n    const tessRate = tess / time;\n    const platTimeNeeded = (platCost - Number(player.wowPlatonicCubes) - plat) / platRate;\n    const hyperTimeNeeded = (hyperCost - Number(player.wowHypercubes) - hyper) / hyperRate;\n    const tessTimeNeeded = (tessCost - Number(player.wowTesseracts) - tess) / tessRate;\n    const Plats = SplitTime(Math.max(0, platTimeNeeded));\n    const Hypers = SplitTime(Math.max(0, hyperTimeNeeded));\n    const Tess = SplitTime(Math.max(0, tessTimeNeeded));\n    const totalTimeNeeded = Math.max(0, platTimeNeeded, hyperTimeNeeded, tessTimeNeeded);\n    const minutesToAdd = totalTimeNeeded * 60;\n    const futureDate = new Date(Date.now() + minutesToAdd * 60000);\n    return stripIndents `\n        Time left until next ${levels} level(s) of platonic upgrade ${i} purchase:\n        Plats: ${Plats.Days} Days, ${Plats.Hours} Hours, ${Plats.Minutes} Minutes\n        Hypers: ${Hypers.Days} Days, ${Hypers.Hours} Hours, ${Hypers.Minutes} Minutes\n        Tess: ${Tess.Days} Days, ${Tess.Hours} Hours, ${Tess.Minutes} Minutes\n\n        At your current rate, you are expected to get this at:\n        ${futureDate}\n\n        Leftovers after ${(totalTimeNeeded / 24).toPrecision(4)} days:\n        Platonics: ${(platRate * (totalTimeNeeded - platTimeNeeded)).toPrecision(4)}\n        Hypers: ${(hyperRate * (totalTimeNeeded - hyperTimeNeeded)).toPrecision(4)}\n        Tesseracts: ${(tessRate * (totalTimeNeeded - tessTimeNeeded)).toPrecision(4)}\n    `;\n};\nconst GM_addStyle = (css) => {\n    const style = document.createElement('style');\n    style.id = 'syn_dashboard_plugin';\n    style.appendChild(document.createTextNode(css));\n    document.head.appendChild(style);\n};\nconst statValues = [\n    el => el.textContent = format(player.ascendShards),\n    el => el.textContent = document.getElementById(\"cubeBlessingTotalAmount\").textContent,\n    el => el.textContent = document.getElementById(\"tesseractBlessingTotalAmount\").textContent,\n    el => el.textContent = document.getElementById(\"hypercubeBlessingTotalAmount\").textContent,\n    el => el.textContent = document.getElementById(\"platonicBlessingTotalAmount\").textContent,\n    el => el.textContent = player.challengecompletions.slice(11, 15).join(' / '),\n    el => el.textContent = format(player.challenge15Exponent, 0),\n    el => el.textContent = player.runeBlessingLevels.slice(1, 6).map(x => format(x)).join(' / '),\n    el => el.textContent = player.runeSpiritLevels.slice(1, 6).map(x => format(x)).join(' / '),\n    el => el.textContent = player.usedCorruptions.slice(1, 10).join(' / '),\n    el => el.textContent = player.challengecompletions.slice(1, 6).join(' / '),\n    el => el.textContent = player.challengecompletions.slice(6, 11).join(' / '),\n    el => el.textContent = player.runelevels.join(' / '),\n    el => {\n        const talismanColors = ['white', 'limegreen', 'lightblue', 'plum', 'orange', 'crimson'];\n        el.querySelectorAll('span').forEach((span, i) => {\n            span.style.color = talismanColors[player.talismanRarity[i] - 1];\n            span.textContent = player.talismanLevels[i] + '';\n        });\n    },\n    el => {\n        const roomba = player.autoResearchToggle;\n        el.style.color = roomba ? 'green' : 'red';\n        el.textContent = roomba ? 'ON' : 'OFF';\n    },\n    el => {\n        const autorune = player.autoSacrificeToggle;\n        el.style.color = autorune ? 'green' : 'red';\n        el.textContent = autorune ? 'ON' : 'OFF';\n    },\n    el => {\n        const autoch = player.autoChallengeRunning;\n        el.style.color = autoch ? 'green' : 'red';\n        el.textContent = autoch ? 'ON' : 'OFF';\n    },\n    el => {\n        const autosac = player.autoAntSacrifice;\n        const realtime = player.autoAntSacrificeMode === 2;\n        const seconds = player.autoAntSacTimer;\n        const text = el.firstChild;\n        text.textContent = `(${seconds} ${realtime ? 'real' : 'igt'} seconds) `;\n        const button = el.lastElementChild;\n        button.style.color = autosac ? 'green' : 'red';\n        button.textContent = autosac ? 'ON' : 'OFF';\n    }\n];\nconst css = `\n    #dashboard { text-align: left; }\n    .db-table {\n        display: grid;\n        grid-template-columns: 10% [a] 40% [b] 40% 10%;\n        padding: 0.5em;\n    }\n    .db-table-cell:nth-child(odd) { grid-area: a; }\n    .db-table-cell:nth-child(even) { grid-area: b; }\n    .db-table-cell { padding: 0.8em 1.2em; }\n    .db-stat-line {\n        display: flex;\n        justify-content: space-between;\n    }\n`;\nconst tab = document.createElement('div');\ntab.id = 'dashboardSubTab';\ntab.style.display = 'none';\ntab.innerHTML = `\n<div id=\"dashboard\" class=\"db-table\" style=\"background-color: #111;\">\n    <div class=\"db-table-cell\">\n    <h3 style=\"color: plum\">Overall progress stats</h3>\n    <div class=\"db-stat-line\" style=\"color: orange\">Constant: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: yellow\">Cube tributes: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: orchid\">Tesseract gifts: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: crimson\">Hypercube benedictions: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: lightgoldenrodyellow\">Platonic Cubes opened: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: #ffac75\">C11-14 completions: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: gold\">C15 exponent: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\">Blessing levels: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\">Spirit levels: <span class=\"dashboardstat\"></span></div>\n\n    <h3 style=\"color: plum\">Current run stats</h3>\n    <div class=\"db-stat-line\" style=\"color: white\">Loadout: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: plum\">C1-5 completions: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: limegreen\">C6-10 completions: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\" style=\"color: cyan\">Rune levels: <span class=\"dashboardstat\"></span></div>\n    <div class=\"db-stat-line\">Talisman levels: <span class=\"dashboardstat\">\n        <span></span> / <span></span> / <span></span> / <span></span> / <span></span> / <span></span> / <span></span>\n    </span></div>\n\n    <h3 style=\"color: plum\">Settings</h3>\n    <div class=\"db-stat-line\">Autoresearch: <button class=\"dashboardstat dashboardstatResearch\"></button></div>\n    <div class=\"db-stat-line\">Autorunes: <button class=\"dashboardstat dashboardstatRunes\"></button></div>\n    <div class=\"db-stat-line\">Autochallenge: <button class=\"dashboardstat dashboardstatChallenge\"></button></div>\n    <div class=\"db-stat-line\">Ants Autosacrifice: <span class=\"dashboardstat\"> <button class=\"dashboardstatSac\"></button></span></div>\n    </div>\n    <div class=\"db-table-cell\">\n        <h3 style=\"color: plum\">Time to plat upgrade</h3>\n        Platonic upgrade: <input id=\"db-plat-number\" type=\"number\" min=\"1\" max=\"15\" step=\"1\" value=\"5\">\n        Number of levels: <input id=\"db-plat-amount\" type=\"number\" min=\"1\" max=\"100\" step=\"1\" value=\"1\">\n        <div><pre id=\"cubeTimes\"></pre></div>\n    </div>\n</div>\n`;\nconst settingsTab = document.getElementById('settings');\nconst button = document.createElement('button');\nbutton.className = 'ascendunlockib';\nlet dashboardLoopRefFast = null;\nlet dashboardLoopRefSlow = null;\nlet activeTab = null;\nlet open = false;\nconst renderDashboardSlow = () => {\n    const upgrade = Number(getElementById('db-plat-number').value);\n    const levels = Number(getElementById('db-plat-amount').value);\n    tab.querySelector('#cubeTimes').textContent = getCubeTimes(upgrade, levels);\n};\nconst renderDashboardFast = () => {\n    if (G['currentTab'] !== 'settings') {\n        open = false;\n        return exitDashboard();\n    }\n    tab.querySelectorAll('.dashboardstat').forEach((stat, i) => { var _a; return (_a = statValues[i]) === null || _a === void 0 ? void 0 : _a.call(statValues, stat); });\n};\nconst openDashboard = () => {\n    const n = player.subtabNumber;\n    G['currentTab'] = 'cubes';\n    [0, 1, 2, 3].forEach(i => {\n        player.subtabNumber = i;\n        visualUpdateCubes();\n    });\n    G['currentTab'] = 'settings';\n    player.subtabNumber = n;\n    renderDashboardFast();\n    renderDashboardSlow();\n    dashboardLoopRefFast = setInterval(renderDashboardFast, 100);\n    dashboardLoopRefSlow = setInterval(renderDashboardSlow, 1000);\n    activeTab = settingsTab.getElementsByClassName('subtabActive')[0];\n    activeTab.style.display = 'none';\n    tab.style.display = 'block';\n    button.innerText = 'Exit Dashboard';\n};\nconst exitDashboard = () => {\n    clearInterval(dashboardLoopRefFast);\n    clearInterval(dashboardLoopRefSlow);\n    tab.style.display = 'none';\n    activeTab.style.display = null;\n    button.textContent = 'Dashboard';\n    const buttons = settingsTab.getElementsByClassName('subtabSwitcher')[0];\n    buttons.style.display = null;\n};\nconst btnListener = () => {\n    open = !open;\n    open ? openDashboard() : exitDashboard();\n};\nconst subButtons = () => {\n    if (open) {\n        open = !open;\n        exitDashboard();\n    }\n};\nconst enable = () => {\n    const style = document.head.querySelector('#syn_dashboard_plugin');\n    if (style !== null) {\n        document.head.removeChild(style);\n        document.querySelector('#settings > .subtabSwitcher').removeChild(button);\n        button.removeEventListener('click', btnListener);\n        document.querySelectorAll('[id^=\"switchSettingSubTab\"]').forEach(v => v.removeEventListener('click', subButtons));\n        settingsTab.removeChild(tab);\n        return;\n    }\n    console.log('hello synergism, dashboard installed in the settings tab');\n    GM_addStyle(css);\n    document.querySelector('#settings > .subtabSwitcher').appendChild(button);\n    tab.querySelector('.dashboardstatResearch').addEventListener('click', () => toggleAutoResearch());\n    tab.querySelector('.dashboardstatRunes').addEventListener('click', () => toggleAutoSacrifice(0));\n    tab.querySelector('.dashboardstatChallenge').addEventListener('click', () => toggleAutoChallengeRun());\n    tab.querySelector('.dashboardstatSac').addEventListener('click', () => toggleAntAutoSacrifice(0));\n    document.querySelectorAll('[id^=\"switchSettingSubTab\"]').forEach(v => v.addEventListener('click', subButtons));\n    settingsTab.appendChild(tab);\n    button.addEventListener('click', btnListener);\n    button.textContent = 'Dashboard';\n};\nexport const main = () => enable();\n"],"sourceRoot":""}